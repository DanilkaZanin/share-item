<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мои бронирования - Share Item</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<nav class="navbar">
    <div class="nav-container">
        <a href="index.html" class="logo">
            <i class="fas fa-exchange-alt"></i> ShareItem
        </a>
        <div class="nav-links" id="navLinks">
            <a href="index.html"><i class="fas fa-home"></i> Главная</a>
            <a href="items.html"><i class="fas fa-box-open"></i> Предметы</a>
            <a href="add-item.html"><i class="fas fa-plus-circle"></i> Добавить</a>
            <a href="my-items.html"><i class="fas fa-th-list"></i> Мои вещи</a>
            <a href="reservations.html" class="active"><i class="fas fa-calendar-check"></i> Бронирования</a>
            <div id="authButtons"></div>
        </div>
        <button class="menu-btn" id="menuBtn">
            <i class="fas fa-bars"></i>
        </button>
    </div>
</nav>

<main class="container">
    <div class="page-header">
        <h1><i class="fas fa-calendar-check"></i> Мои бронирования</h1>
        <p>Управляйте бронированиями предметов, которые вы забронировали</p>
    </div>

    <div class="tabs">
        <button class="tab-btn active" data-tab="active-reservations">Активные</button>
        <button class="tab-btn" data-tab="pending-reservations">Ожидают подтверждения</button>
        <button class="tab-btn" data-tab="history-reservations">История</button>
    </div>

    <div class="tab-content active" id="active-reservations">
        <div class="filter-controls">
            <select id="activeFilter" class="filter-select">
                <option value="all">Все активные</option>
                <option value="current">Текущие (в процессе)</option>
                <option value="upcoming">Предстоящие</option>
                <option value="ending">Завершающиеся</option>
            </select>
        </div>

        <div class="reservations-grid" id="activeReservationsGrid">
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i> Загрузка активных бронирований...
            </div>
        </div>

        <div class="no-items" id="noActiveReservations" style="display: none;">
            <i class="fas fa-calendar-times fa-3x"></i>
            <h3>Нет активных бронирований</h3>
            <p>Забронируйте что-нибудь из доступных предметов!</p>
            <a href="items.html" class="btn btn-primary">
                <i class="fas fa-box-open"></i> Посмотреть предметы
            </a>
        </div>
    </div>

    <div class="tab-content" id="pending-reservations">
        <div class="reservations-table-container">
            <table class="reservations-table">
                <thead>
                <tr>
                    <th>Предмет</th>
                    <th>Владелец</th>
                    <th>Дата начала</th>
                    <th>Дата окончания</th>
                    <th>Статус</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="pendingReservationsTable">
                <tr>
                    <td colspan="6" class="loading-cell">
                        <i class="fas fa-spinner fa-spin"></i> Загрузка ожидающих бронирований...
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="tab-content" id="history-reservations">
        <div class="history-controls">
            <div class="date-range">
                <input type="date" id="startDate" class="date-input">
                <span>по</span>
                <input type="date" id="endDate" class="date-input">
                <button class="btn btn-secondary" id="applyDateFilter">
                    <i class="fas fa-filter"></i> Применить
                </button>
                <button class="btn btn-outline" id="resetDateFilter">
                    <i class="fas fa-redo"></i> Сбросить
                </button>
            </div>

            <select id="historyStatusFilter" class="filter-select">
                <option value="all">Все статусы</option>
                <option value="COMPLETED">Завершённые</option>
                <option value="CANCELLED">Отменённые</option>
                <option value="REJECTED">Отклонённые</option>
            </select>
        </div>

        <div class="history-list" id="historyReservationsList">
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i> Загрузка истории бронирований...
            </div>
        </div>

        <div class="no-items" id="noHistoryReservations" style="display: none;">
            <i class="fas fa-history fa-3x"></i>
            <h3>История бронирований пуста</h3>
            <p>Здесь будут отображаться ваши завершённые бронирования</p>
        </div>
    </div>
</main>

<!-- Модальное окно отмены бронирования -->
<div class="modal" id="cancelReservationModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-times-circle"></i> Отмена бронирования</h2>
            <button class="modal-close" id="closeCancelModal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="cancel-warning">
                <i class="fas fa-exclamation-triangle"></i>
                <p>Вы уверены, что хотите отменить это бронирование?</p>
            </div>

            <div class="reservation-details" id="cancelReservationDetails">
                <!-- Детали бронирования будут здесь -->
            </div>

            <div class="form-group">
                <label for="cancelReason">
                    <i class="fas fa-comment"></i> Причина отмены (опционально)
                </label>
                <textarea id="cancelReason" rows="3" placeholder="Укажите причину отмены..."></textarea>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="backFromCancel">
                    Назад
                </button>
                <button type="button" class="btn btn-danger" id="confirmCancel">
                    <i class="fas fa-times"></i> Отменить бронирование
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно оценки -->
<div class="modal" id="rateModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-star"></i> Оцените предмет</h2>
            <button class="modal-close" id="closeRateModal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="rate-item-info" id="rateItemInfo">
                <!-- Информация о предмете будет здесь -->
            </div>

            <div class="rating-section">
                <h3>Ваша оценка</h3>
                <div class="stars" id="ratingStars">
                    <i class="fas fa-star" data-rating="1"></i>
                    <i class="fas fa-star" data-rating="2"></i>
                    <i class="fas fa-star" data-rating="3"></i>
                    <i class="fas fa-star" data-rating="4"></i>
                    <i class="fas fa-star" data-rating="5"></i>
                </div>
                <div class="rating-text" id="ratingText">Выберите оценку</div>
            </div>

            <div class="form-group">
                <label for="reviewText">
                    <i class="fas fa-comment-dots"></i> Отзыв (опционально)
                </label>
                <textarea id="reviewText" rows="4" placeholder="Поделитесь вашими впечатлениями от использования предмета..."></textarea>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="skipRating">
                    Пропустить
                </button>
                <button type="button" class="btn btn-primary" id="submitRating">
                    <i class="fas fa-paper-plane"></i> Отправить отзыв
                </button>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
    <p>© 2024 ShareItem Platform. Все права защищены.</p>
</footer>

<script src="js/utils.js"></script>
<script src="js/api.js"></script>
<script src="js/main.js"></script>
<script src="js/reservations.js"></script>
</body>
</html>